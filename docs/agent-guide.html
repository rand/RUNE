<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUNE Agent Integration Guide</title>
    <meta name="description" content="Practical guide for integrating RUNE into AI agent architectures. Examples, best practices, and integration patterns for LangChain, AutoGPT, and Claude Code.">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://rand.github.io/RUNE/agent-guide.html">
    <meta property="og:title" content="RUNE Agent Integration Guide">
    <meta property="og:description" content="Practical guide for integrating RUNE into AI agent architectures. Examples, best practices, and integration patterns for LangChain, AutoGPT, and Claude Code.">
    <meta property="og:image" content="https://rand.github.io/RUNE/og-image.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://rand.github.io/RUNE/agent-guide.html">
    <meta name="twitter:title" content="RUNE Agent Integration Guide">
    <meta name="twitter:description" content="Practical guide for integrating RUNE into AI agent architectures. Examples, best practices, and integration patterns for LangChain, AutoGPT, and Claude Code.">
    <meta name="twitter:image" content="https://rand.github.io/RUNE/og-image.png">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/geist@1.0.0/dist/geist.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="nav-brand">
                <span class="logo-glyph"></span>
                <strong>RUNE</strong> v0.1.0
            </a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="whitepaper.html">Whitepaper</a>
                <a href="agent-guide.html">Agent Guide</a>
                <a href="https://github.com/rand/RUNE">GitHub</a>
                <button class="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-toggle-icon"></span>
                </button>
            </div>
        </div>
    </nav>

    <aside class="sidebar">
        <div class="sidebar-content">
            <div class="sidebar-status">
                <span class="status-glyph"></span>
                <span class="sidebar-tagline">// Agent integration guide</span>
            </div>
        </div>
    </aside>

    <main class="container">
        <header class="paper-header">
            <h1>Agent Integration Guide</h1>
            <p class="paper-subtitle">Efficient, comprehensive guidance for working with RUNE</p>
            <p class="paper-meta">
                <span class="version-badge">v0.1.0</span>
                <span>November 2025</span>
                <span>For agentic systems</span>
            </p>
        </header>

        <div class="section">
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#project-overview">Project Overview</a></li>
<li><a href="#repository-structure">Repository Structure</a></li>
<li><a href="#development-workflow">Development Workflow</a></li>
<li><a href="#documentation-protocols">Documentation Protocols</a></li>
<li><a href="#release-management">Release Management</a></li>
<li><a href="#repository-organization">Repository Organization</a></li>
<li><a href="#testing-protocols">Testing Protocols</a></li>
<li><a href="#performance-requirements">Performance Requirements</a></li>
<li><a href="#common-tasks">Common Tasks</a></li>
</ol>
<hr />
<h2 id="quick-start">Quick Start</h2>
<p><strong>Project</strong>: RUNE - High-Performance Authorization &amp; Configuration Engine
<strong>Stack</strong>: Rust (core), Python bindings, Cedar Policy Language
<strong>Performance</strong>: Sub-millisecond latency, 5M+ ops/sec
<strong>License</strong>: MIT OR Apache-2.0</p>
<p><strong>Critical Context</strong>:
- Work in feature branches, never commit to <code>main</code> directly
- Test AFTER committing (never test uncommitted code)
- Update ALL relevant docs when making significant changes
- Maintain sub-millisecond authorization latency</p>
<p><strong>First Steps</strong>:</p>
<pre><code class="language-bash"># Build and test
cargo build --release
cargo test
./target/release/rune --help

# Run benchmarks to validate performance
./target/release/rune benchmark --requests 10000 --threads 8
</code></pre>
<hr />
<h2 id="project-overview">Project Overview</h2>
<h3 id="what-is-rune">What is RUNE?</h3>
<p>RUNE provides <strong>real, enforceable guardrails</strong> for AI agents through a dual-engine architecture:</p>
<ol>
<li><strong>Datalog Engine</strong>: Configuration rules and logic programming</li>
<li><strong>Cedar Engine</strong>: Authorization policies (Amazon Cedar Policy Language)</li>
</ol>
<h3 id="core-value-proposition">Core Value Proposition</h3>
<ul>
<li><strong>Performance</strong>: Sub-millisecond authorization decisions (&lt;1ms P99)</li>
<li><strong>Throughput</strong>: 5M+ operations per second on a single core</li>
<li><strong>Deployment</strong>: Single binary (~10MB static executable)</li>
<li><strong>Integration</strong>: Python bindings for AI frameworks (LangChain, AutoGPT, etc.)</li>
</ul>
<h3 id="architecture">Architecture</h3>
<div class="diagram-container">
    <img class="diagram-svg" alt="RUNE Architecture" src="diagrams/architecture.svg" />
</div>
<p>RUNE evaluates requests through parallel Datalog and Cedar engines, backed by a lock-free fact store. For detailed architecture, see the <a href="whitepaper.html#4-architecture">Technical Whitepaper</a>.</p>
<p><strong>Key Design Patterns</strong>:
- <strong>Lock-free data structures</strong>: Crossbeam epoch-based memory reclamation
- <strong>Zero-copy architecture</strong>: Arc-wrapped values, memory-mapped facts
- <strong>Parallel evaluation</strong>: Rayon for dual-engine concurrency
- <strong>DashMap caching</strong>: Concurrent hashmap for authorization results</p>
<hr />
<h2 id="repository-structure">Repository Structure</h2>
<pre><code>RUNE/
├── rune-core/          # Rust core engine
│   ├── src/
│   │   ├── lib.rs      # Public API surface
│   │   ├── engine.rs   # Main authorization engine
│   │   ├── facts.rs    # Lock-free fact store
│   │   ├── policy.rs   # Cedar integration
│   │   ├── datalog.rs  # Datalog evaluation
│   │   ├── parser.rs   # .rune file parser
│   │   ├── request.rs  # Request abstraction
│   │   └── types.rs    # Core types (Value, Entity, etc.)
│   └── Cargo.toml
├── rune-cli/           # Command-line interface
│   ├── src/main.rs     # CLI with eval, validate, benchmark, serve
│   └── Cargo.toml
├── rune-python/        # Python bindings (PyO3)
│   └── (disabled until Python dev env configured)
├── examples/           # Example .rune configurations
├── specs/              # Project specifications
│   └── origination/    # Original competing plans
├── docs/               # GitHub Pages documentation
├── diagrams/           # D2 architecture diagrams
├── scripts/            # Validation and build scripts
├── Cargo.toml          # Workspace manifest
├── README.md           # User-facing documentation
├── WHITEPAPER.md       # Technical whitepaper
├── AGENT_GUIDE.md      # This file
├── CONTRIBUTING.md     # Contribution guidelines
├── CHANGELOG.md        # Version history
├── LICENSE-MIT         # MIT license
└── LICENSE-APACHE      # Apache 2.0 license
</code></pre>
<h3 id="key-files">Key Files</h3>
<table>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
<th>Update When</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>README.md</code></td>
<td>User documentation, quick start</td>
<td>API changes, feature additions</td>
</tr>
<tr>
<td><code>WHITEPAPER.md</code></td>
<td>Technical deep dive, architecture</td>
<td>Architecture changes, new concepts</td>
</tr>
<tr>
<td><code>AGENT_GUIDE.md</code></td>
<td>Agent workflow guidance</td>
<td>Workflow changes, new protocols</td>
</tr>
<tr>
<td><code>CHANGELOG.md</code></td>
<td>Version history</td>
<td>Every semantic version change</td>
</tr>
<tr>
<td><code>CONTRIBUTING.md</code></td>
<td>Contribution guidelines</td>
<td>Process changes</td>
</tr>
<tr>
<td><code>Cargo.toml</code></td>
<td>Workspace dependencies</td>
<td>New crates, dependency updates</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="development-workflow">Development Workflow</h2>
<h3 id="branching-strategy">Branching Strategy</h3>
<p><strong>ALWAYS use feature branches</strong>:</p>
<pre><code class="language-bash">git checkout -b feature/typed-holes
git checkout -b fix/cache-invalidation
git checkout -b docs/architecture-diagrams
</code></pre>
<p><strong>Branch Naming</strong>:
- <code>feature/</code>: New functionality
- <code>fix/</code>: Bug fixes
- <code>refactor/</code>: Code restructuring
- <code>docs/</code>: Documentation updates
- <code>perf/</code>: Performance improvements</p>
<h3 id="commit-protocol">Commit Protocol</h3>
<p><strong>CRITICAL</strong>: Commit BEFORE testing, never test uncommitted code.</p>
<pre><code class="language-bash"># 1. Make changes
# 2. Commit changes
git add .
git commit -m &quot;Add typed holes for Datalog integration&quot;
git log -1 --oneline

# 3. Run tests
cargo test

# 4. If tests fail: Fix → Commit → Re-test
</code></pre>
<p><strong>Commit Message Format</strong>:</p>
<pre><code>&lt;type&gt;: &lt;short summary&gt;

&lt;optional detailed explanation&gt;

&lt;optional breaking changes&gt;
</code></pre>
<p><strong>Types</strong>: <code>feat</code>, <code>fix</code>, <code>refactor</code>, <code>perf</code>, <code>docs</code>, <code>test</code>, <code>chore</code></p>
<p><strong>Examples</strong>:</p>
<pre><code>feat: Add semi-naive Datalog evaluation engine
fix: Resolve race condition in cache invalidation
perf: Optimize fact store with lock-free epoch reclamation
docs: Update whitepaper with performance benchmarks
</code></pre>
<h3 id="pull-requests">Pull Requests</h3>
<pre><code class="language-bash"># Push branch
git push -u origin feature/typed-holes

# Create PR (GitHub CLI)
gh pr create --title &quot;Add typed holes for Datalog integration&quot; \
  --body &quot;Implements typed holes pattern for clean component boundaries...&quot;
</code></pre>
<p><strong>PR Checklist</strong>:
- [ ] All tests pass
- [ ] Benchmarks show no performance regression
- [ ] Documentation updated (README, WHITEPAPER, etc.)
- [ ] CHANGELOG.md updated if semantic version bump
- [ ] Code follows Rust best practices (clippy clean)</p>
<hr />
<h2 id="documentation-protocols">Documentation Protocols</h2>
<h3 id="when-to-update-documentation">When to Update Documentation</h3>
<table>
<thead>
<tr>
<th>Change Type</th>
<th>Update These Docs</th>
</tr>
</thead>
<tbody>
<tr>
<td>New feature</td>
<td>README.md, WHITEPAPER.md, examples/</td>
</tr>
<tr>
<td>API change</td>
<td>README.md, rune-core/src/lib.rs (rustdoc)</td>
</tr>
<tr>
<td>Architecture change</td>
<td>WHITEPAPER.md, diagrams/, docs/</td>
</tr>
<tr>
<td>Performance improvement</td>
<td>README.md (benchmarks), WHITEPAPER.md</td>
</tr>
<tr>
<td>Bug fix</td>
<td>CHANGELOG.md</td>
</tr>
<tr>
<td>Breaking change</td>
<td>CHANGELOG.md, README.md, migration guide</td>
</tr>
</tbody>
</table>
<h3 id="documentation-standards">Documentation Standards</h3>
<p><strong>README.md</strong>:
- Keep quick start up-to-date
- Update benchmark results when performance changes
- Maintain feature list accuracy
- Update development status checklist</p>
<p><strong>WHITEPAPER.md</strong>:
- Validate all claims against code
- Link to specific tagged versions for code references
- Update architecture diagrams when design changes
- Maintain narrative flow and technical precision</p>
<p><strong>AGENT_GUIDE.md</strong>:
- Update when workflows change
- Add new common tasks as they emerge
- Keep repository structure current</p>
<p><strong>Rustdoc</strong>:
- Document all public APIs with <code>///</code> comments
- Provide examples for non-trivial functions
- Explain safety requirements for unsafe code</p>
<h3 id="code-reference-format">Code Reference Format</h3>
<p>When updating docs, use tagged version links:</p>
<pre><code class="language-markdown">The [fact store implementation](https://github.com/user/rune/blob/v0.1.0/rune-core/src/facts.rs#L45-L67)
uses epoch-based memory reclamation.
</code></pre>
<p><strong>Format</strong>: <code>https://github.com/{user}/{repo}/blob/{tag}/{path}#{lines}</code></p>
<hr />
<h2 id="release-management">Release Management</h2>
<h3 id="semantic-versioning">Semantic Versioning</h3>
<p>RUNE follows <a href="https://semver.org/">SemVer 2.0.0</a>:</p>
<ul>
<li><strong>0.x.y</strong>: Development releases (pre-1.0, API unstable)</li>
<li><strong>0.x.0</strong>: Minor features, non-breaking changes</li>
<li><strong>0.x.y</strong>: Patches, bug fixes</li>
<li><strong>1.0.0</strong>: First stable API release</li>
<li><strong>x.0.0</strong>: Major version (breaking changes)</li>
<li><strong>x.y.0</strong>: Minor version (new features, backward compatible)</li>
<li><strong>x.y.z</strong>: Patch version (bug fixes, backward compatible)</li>
</ul>
<h3 id="release-process">Release Process</h3>
<p><strong>1. Version Bump</strong>:</p>
<pre><code class="language-bash"># Update version in Cargo.toml (workspace.package.version)
# Update CHANGELOG.md with release notes
git add Cargo.toml CHANGELOG.md
git commit -m &quot;chore: Bump version to 0.2.0&quot;
</code></pre>
<p><strong>2. Create Tag</strong>:</p>
<pre><code class="language-bash">git tag -a v0.2.0 -m &quot;Release v0.2.0: Semi-naive Datalog evaluation&quot;
git push origin v0.2.0
</code></pre>
<p><strong>3. Build Release Artifacts</strong>:</p>
<pre><code class="language-bash">cargo build --release
# Binary: target/release/rune
</code></pre>
<p><strong>4. Create GitHub Release</strong>:</p>
<pre><code class="language-bash">gh release create v0.2.0 \
  --title &quot;v0.2.0: Semi-naive Datalog evaluation&quot; \
  --notes &quot;$(cat CHANGELOG.md | sed -n '/## \[0.2.0\]/,/## \[0.1.0\]/p')&quot; \
  target/release/rune#rune-v0.2.0-$(uname -m)-$(uname -s)
</code></pre>
<h3 id="special-tags">Special Tags</h3>
<ul>
<li><strong>Validation Tags</strong>: For whitepaper claims validation (e.g., <code>v0.1.0-whitepaper</code>)</li>
<li><strong>Pre-release Tags</strong>: For testing (e.g., <code>v0.2.0-rc.1</code>)</li>
</ul>
<hr />
<h2 id="repository-organization">Repository Organization</h2>
<h3 id="organization-principles">Organization Principles</h3>
<ol>
<li><strong>Non-destructive</strong>: Reorganize without losing references or history</li>
<li><strong>Reference-preserving</strong>: Maintain links, cross-references, and citations</li>
<li><strong>Context-efficient</strong>: Keep structure clear and navigable</li>
<li><strong>Documentation-driven</strong>: Structure reflects documented architecture</li>
</ol>
<h3 id="tidying-guidelines">Tidying Guidelines</h3>
<p><strong>DO</strong>:
- <i class="fa-solid fa-circle-check status-success"></i> Use <code>git mv</code> to preserve history when moving files
- <i class="fa-solid fa-circle-check status-success"></i> Update all documentation cross-references after moves
- <i class="fa-solid fa-circle-check status-success"></i> Group related files in logical directories
- <i class="fa-solid fa-circle-check status-success"></i> Remove generated artifacts (covered by .gitignore)
- <i class="fa-solid fa-circle-check status-success"></i> Clean up commented-out code in favor of git history</p>
<p><strong>DON'T</strong>:
- <i class="fa-solid fa-circle-xmark status-error"></i> Delete files without checking for references
- <i class="fa-solid fa-circle-xmark status-error"></i> Rename files without updating imports/documentation
- <i class="fa-solid fa-circle-xmark status-error"></i> Move files between commits (do it as separate commit)
- <i class="fa-solid fa-circle-xmark status-error"></i> Restructure without updating AGENT_GUIDE.md</p>
<p><strong>Example Tidy Workflow</strong>:</p>
<pre><code class="language-bash"># Move file with history preservation
git mv old/path/file.rs new/path/file.rs

# Update imports and references
# (edit affected files)

# Commit move and updates together
git add .
git commit -m &quot;refactor: Reorganize fact store modules

- Move fact store to rune-core/src/storage/
- Update all imports and cross-references
- Update AGENT_GUIDE.md repository structure&quot;
</code></pre>
<h3 id="adding-new-components">Adding New Components</h3>
<p>When adding new crates, modules, or major features:</p>
<ol>
<li><strong>Create structure</strong>:</li>
</ol>
<pre><code class="language-bash">mkdir -p rune-new-component/src
cd rune-new-component
</code></pre>
<ol>
<li><strong>Add to workspace</strong> (<code>Cargo.toml</code>):</li>
</ol>
<pre><code class="language-toml">[workspace]
members = [
    &quot;rune-core&quot;,
    &quot;rune-cli&quot;,
    &quot;rune-new-component&quot;,  # Add here
]
</code></pre>
<ol>
<li><strong>Update documentation</strong>:</li>
<li>Add to repository structure in AGENT_GUIDE.md</li>
<li>Add to architecture diagram</li>
<li>
<p>Update README.md if user-facing</p>
</li>
<li>
<p><strong>Add tests</strong>:</p>
</li>
</ol>
<pre><code class="language-bash">mkdir -p rune-new-component/tests
# Add integration tests
</code></pre>
<hr />
<h2 id="testing-protocols">Testing Protocols</h2>
<h3 id="critical-testing-rules">Critical Testing Rules</h3>
<p><strong>RULE 1</strong>: Commit BEFORE testing
<strong>RULE 2</strong>: NEVER test uncommitted code
<strong>RULE 3</strong>: Kill old test processes before running new tests</p>
<h3 id="testing-workflow">Testing Workflow</h3>
<pre><code class="language-bash"># 1. Make changes and commit
git add .
git commit -m &quot;feat: Add feature X&quot;

# 2. Kill any running tests
pkill -f &quot;cargo test&quot;

# 3. Run tests
cargo test

# 4. Run benchmarks (for performance-critical changes)
cargo bench

# 5. If tests fail:
#    - Fix issue
#    - Commit fix
#    - Re-test (goto step 2)
</code></pre>
<h3 id="test-types">Test Types</h3>
<table>
<thead>
<tr>
<th>Test Type</th>
<th>Command</th>
<th>When to Run</th>
</tr>
</thead>
<tbody>
<tr>
<td>Unit</td>
<td><code>cargo test --lib</code></td>
<td>After every change</td>
</tr>
<tr>
<td>Integration</td>
<td><code>cargo test --test '*'</code></td>
<td>Before PR</td>
</tr>
<tr>
<td>Benchmarks</td>
<td><code>cargo bench</code></td>
<td>Performance changes</td>
</tr>
<tr>
<td>CLI</td>
<td><code>cargo test --bin rune</code></td>
<td>CLI changes</td>
</tr>
<tr>
<td>Full suite</td>
<td><code>cargo test --workspace</code></td>
<td>Before release</td>
</tr>
</tbody>
</table>
<h3 id="performance-testing">Performance Testing</h3>
<p><strong>Critical</strong>: RUNE must maintain sub-millisecond latency.</p>
<pre><code class="language-bash"># Run standard benchmark
./target/release/rune benchmark --requests 10000 --threads 8

# Expected output:
# Throughput: &gt;5,000,000 req/sec
# Avg latency: &lt;0.001ms
# P99 latency: &lt;0.001ms
# Cache hit rate: &gt;90%
</code></pre>
<p><strong>If performance degrades</strong>:
1. Profile with <code>cargo flamegraph</code> or <code>perf</code>
2. Identify bottleneck
3. Optimize hot path
4. Re-benchmark
5. Update README.md with new benchmark results</p>
<h3 id="test-coverage">Test Coverage</h3>
<p>Target coverage (when tooling is added):
- Critical path: 90%+
- Authorization logic: 95%+
- Parser: 80%+
- Overall: 85%+</p>
<hr />
<h2 id="performance-requirements">Performance Requirements</h2>
<h3 id="hard-requirements">Hard Requirements</h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Requirement</th>
<th>Current</th>
</tr>
</thead>
<tbody>
<tr>
<td>P99 Latency</td>
<td>&lt;1ms</td>
<td>~0.0005ms</td>
</tr>
<tr>
<td>Throughput</td>
<td>100K+ req/sec</td>
<td>5M+ req/sec</td>
</tr>
<tr>
<td>Memory</td>
<td>&lt;100MB for 1M facts</td>
<td>&lt;50MB</td>
</tr>
<tr>
<td>Binary Size</td>
<td>&lt;20MB</td>
<td>~10MB</td>
</tr>
<tr>
<td>Cache Hit Rate</td>
<td>&gt;85%</td>
<td>&gt;90%</td>
</tr>
</tbody>
</table>
<h3 id="performance-patterns">Performance Patterns</h3>
<p><strong>DO</strong>:
- <i class="fa-solid fa-circle-check status-success"></i> Use Arc for zero-copy sharing
- <i class="fa-solid fa-circle-check status-success"></i> Use crossbeam for lock-free data structures
- <i class="fa-solid fa-circle-check status-success"></i> Use rayon for data parallelism
- <i class="fa-solid fa-circle-check status-success"></i> Use DashMap for concurrent caching
- <i class="fa-solid fa-circle-check status-success"></i> Minimize allocations in hot paths
- <i class="fa-solid fa-circle-check status-success"></i> Use <code>#[inline]</code> for small, hot functions</p>
<p><strong>DON'T</strong>:
- <i class="fa-solid fa-circle-xmark status-error"></i> Use <code>Mutex</code> or <code>RwLock</code> in hot paths
- <i class="fa-solid fa-circle-xmark status-error"></i> Clone large structures unnecessarily
- <i class="fa-solid fa-circle-xmark status-error"></i> Allocate in tight loops
- <i class="fa-solid fa-circle-xmark status-error"></i> Use async where sync suffices (added overhead)
- <i class="fa-solid fa-circle-xmark status-error"></i> Ignore <code>clippy::perf</code> warnings</p>
<h3 id="benchmarking-new-features">Benchmarking New Features</h3>
<p>When adding features:</p>
<ol>
<li><strong>Baseline</strong>:</li>
</ol>
<pre><code class="language-bash">cargo bench -- baseline
</code></pre>
<ol>
<li>
<p><strong>Implement feature</strong></p>
</li>
<li>
<p><strong>Compare</strong>:</p>
</li>
</ol>
<pre><code class="language-bash">cargo bench -- new_feature
</code></pre>
<ol>
<li>
<p><strong>Validate</strong>: No regression &gt;5% on critical paths</p>
</li>
<li>
<p><strong>Update docs</strong>: If performance characteristics change</p>
</li>
</ol>
<hr />
<h2 id="common-tasks">Common Tasks</h2>
<h3 id="add-a-new-datalog-rule-type">Add a New Datalog Rule Type</h3>
<pre><code class="language-bash"># 1. Edit parser
vim rune-core/src/parser.rs

# 2. Add rule representation
vim rune-core/src/datalog.rs

# 3. Update evaluation
vim rune-core/src/datalog.rs

# 4. Add tests
vim rune-core/src/datalog.rs  # Add #[cfg(test)] tests

# 5. Add example
vim examples/new-rule.rune

# 6. Commit and test
git add .
git commit -m &quot;feat: Add negation support to Datalog rules&quot;
cargo test
</code></pre>
<h3 id="add-a-new-cedar-policy-pattern">Add a New Cedar Policy Pattern</h3>
<pre><code class="language-bash"># 1. Edit policy integration
vim rune-core/src/policy.rs

# 2. Add entity conversion if needed
vim rune-core/src/types.rs

# 3. Add tests
vim rune-core/src/policy.rs

# 4. Add example
vim examples/new-policy.rune

# 5. Commit and test
git add .
git commit -m &quot;feat: Support hierarchical resource policies&quot;
cargo test
</code></pre>
<h3 id="update-performance-benchmarks">Update Performance Benchmarks</h3>
<pre><code class="language-bash"># 1. Run benchmarks
./target/release/rune benchmark --requests 100000 --threads 16

# 2. Update README.md
vim README.md  # Update benchmark results section

# 3. Update WHITEPAPER.md
vim WHITEPAPER.md  # Update performance section

# 4. Commit
git add README.md WHITEPAPER.md
git commit -m &quot;docs: Update benchmark results (10M ops/sec achieved)&quot;
</code></pre>
<h3 id="add-new-documentation">Add New Documentation</h3>
<pre><code class="language-bash"># 1. Create doc file
vim docs/new-guide.md

# 2. Add to docs site
vim docs/_config.yml  # Add to navigation

# 3. Link from README
vim README.md  # Add link to new guide

# 4. Commit
git add docs/ README.md
git commit -m &quot;docs: Add advanced Datalog guide&quot;
</code></pre>
<h3 id="create-a-release">Create a Release</h3>
<pre><code class="language-bash"># 1. Update version
vim Cargo.toml  # workspace.package.version

# 2. Update CHANGELOG.md
vim CHANGELOG.md  # Add release notes

# 3. Commit version bump
git add Cargo.toml CHANGELOG.md
git commit -m &quot;chore: Bump version to 0.3.0&quot;

# 4. Create tag
git tag -a v0.3.0 -m &quot;Release v0.3.0: Hot-reload with RCU&quot;

# 5. Build release
cargo build --release

# 6. Test release binary
./target/release/rune --version
./target/release/rune benchmark --requests 10000

# 7. Push tag
git push origin v0.3.0

# 8. Create GitHub release
gh release create v0.3.0 \
  --title &quot;v0.3.0: Hot-reload with RCU&quot; \
  --notes-file &lt;(grep -A 20 &quot;## \[0.3.0\]&quot; CHANGELOG.md)
</code></pre>
<hr />
<h2 id="integration-with-mnemosyne">Integration with mnemosyne</h2>
<p>If using mnemosyne for memory and orchestration:</p>
<p><strong>Store Key Decisions</strong>:</p>
<pre><code class="language-bash">mnemosyne remember -c &quot;Using Cedar 3.x API with entity ownership pattern&quot; \
  -n &quot;project:rune&quot; -i 9 -t &quot;architecture,cedar&quot;

mnemosyne remember -c &quot;Lock-free fact store requires unsafe code allowance in facts.rs&quot; \
  -n &quot;project:rune&quot; -i 8 -t &quot;implementation,concurrency&quot;
</code></pre>
<p><strong>Recall Context</strong>:</p>
<pre><code class="language-bash">mnemosyne recall -q &quot;cedar policy integration&quot; -n &quot;project:rune&quot; -l 5
mnemosyne recall -q &quot;performance optimization&quot; -n &quot;project:rune&quot; -l 10
</code></pre>
<p><strong>Store TODO Items</strong>:</p>
<pre><code class="language-bash">mnemosyne remember -c &quot;Implement semi-naive Datalog evaluation&quot; \
  -n &quot;project:rune&quot; -i 9 -t &quot;todo,datalog&quot;

mnemosyne remember -c &quot;Add Python bindings tests&quot; \
  -n &quot;project:rune&quot; -i 7 -t &quot;todo,python&quot;
</code></pre>
<hr />
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-build-errors">Common Build Errors</h3>
<p><strong>Error</strong>: <code>unsafe code is forbidden</code>
<strong>Fix</strong>: Add <code>#![allow(unsafe_code)]</code> to module using crossbeam/unsafe patterns</p>
<p><strong>Error</strong>: Cedar API compatibility
<strong>Fix</strong>: Check Cedar version (must be 3.x), update to latest API patterns</p>
<p><strong>Error</strong>: Python linker errors
<strong>Fix</strong>: Ensure Python dev environment configured, or disable rune-python in workspace</p>
<h3 id="performance-debugging">Performance Debugging</h3>
<pre><code class="language-bash"># Profile with flamegraph
cargo flamegraph --bin rune -- benchmark --requests 10000

# Profile with perf (Linux)
perf record --call-graph dwarf ./target/release/rune benchmark
perf report

# Check assembly output
cargo rustc --release -- --emit asm
</code></pre>
<h3 id="documentation-build">Documentation Build</h3>
<pre><code class="language-bash"># Build rustdoc
cargo doc --no-deps --open

# Build GitHub Pages locally (requires Jekyll)
cd docs
bundle install
bundle exec jekyll serve
</code></pre>
<hr />
<h2 id="references">References</h2>
<ul>
<li><a href="https://docs.cedarpolicy.com/">Cedar Policy Language Docs</a></li>
<li><a href="https://docs.rs/crossbeam/">Crossbeam Documentation</a></li>
<li><a href="https://nnethercote.github.io/perf-book/">Rust Performance Book</a></li>
<li><a href="https://semver.org/">SemVer Specification</a></li>
<li><a href="https://d2lang.com/">D2 Diagram Language</a></li>
</ul>
<hr />
<p><strong>Last Updated</strong>: 2025-11-08
<strong>Maintainer</strong>: RUNE Contributors
<strong>Status</strong>: Living document - update as workflows evolve</p>
        </div>

        <footer class="footer">
            <p>
                RUNE is open-source software. For questions or contributions, visit the
                <a href="https://github.com/rand/RUNE">GitHub repository</a>.
            </p>
        </footer>
    </main>

    <script src="js/theme.js"></script>
    <script src="js/sidebar.js"></script>
</body>
</html>